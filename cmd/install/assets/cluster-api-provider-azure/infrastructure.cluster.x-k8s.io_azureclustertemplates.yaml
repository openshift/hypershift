---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.9.2
  creationTimestamp: null
  name: azureclustertemplates.infrastructure.cluster.x-k8s.io
spec:
  group: infrastructure.cluster.x-k8s.io
  names:
    categories:
    - cluster-api
    kind: AzureClusterTemplate
    listKind: AzureClusterTemplateList
    plural: azureclustertemplates
    singular: azureclustertemplate
  scope: Namespaced
  versions:
  - name: v1beta1
    schema:
      openAPIV3Schema:
        description: AzureClusterTemplate is the Schema for the azureclustertemplates
          API.
        properties:
          apiVersion:
            description: 'APIVersion defines the versioned schema of this representation
              of an object. Servers should convert recognized schemas to the latest
              internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources'
            type: string
          kind:
            description: 'Kind is a string value representing the REST resource this
              object represents. Servers may infer this from the endpoint the client
              submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
            type: string
          metadata:
            type: object
          spec:
            description: AzureClusterTemplateSpec defines the desired state of AzureClusterTemplate.
            properties:
              template:
                description: AzureClusterTemplateResource describes the data needed
                  to create an AzureCluster from a template.
                properties:
                  spec:
                    description: AzureClusterTemplateResourceSpec specifies an Azure
                      cluster template resource.
                    properties:
                      additionalTags:
                        additionalProperties:
                          type: string
                        description: AdditionalTags is an optional set of tags to
                          add to Azure resources managed by the Azure provider, in
                          addition to the ones added by default.
                        type: object
                      azureEnvironment:
                        description: 'AzureEnvironment is the name of the AzureCloud
                          to be used. The default value that would be used by most
                          users is "AzurePublicCloud", other values are: - ChinaCloud:
                          "AzureChinaCloud" - GermanCloud: "AzureGermanCloud" - PublicCloud:
                          "AzurePublicCloud" - USGovernmentCloud: "AzureUSGovernmentCloud"'
                        type: string
                      bastionSpec:
                        description: BastionSpec encapsulates all things related to
                          the Bastions in the cluster.
                        properties:
                          azureBastion:
                            description: AzureBastionTemplateSpec specifies a template
                              for an Azure Bastion host.
                            properties:
                              subnet:
                                description: SubnetTemplateSpec specifies a template
                                  for a subnet.
                                properties:
                                  cidrBlocks:
                                    description: CIDRBlocks defines the subnet's address
                                      space, specified as one or more address prefixes
                                      in CIDR notation.
                                    items:
                                      type: string
                                    type: array
                                  name:
                                    description: Name defines a name for the subnet
                                      resource.
                                    type: string
                                  natGateway:
                                    description: NatGateway associated with this subnet.
                                    properties:
                                      name:
                                        type: string
                                    required:
                                    - name
                                    type: object
                                  role:
                                    description: Role defines the subnet role (eg.
                                      Node, ControlPlane)
                                    enum:
                                    - node
                                    - control-plane
                                    - bastion
                                    type: string
                                  securityGroup:
                                    description: SecurityGroup defines the NSG (network
                                      security group) that should be attached to this
                                      subnet.
                                    properties:
                                      securityRules:
                                        description: SecurityRules is a slice of Azure
                                          security rules for security groups.
                                        items:
                                          description: SecurityRule defines an Azure
                                            security rule for security groups.
                                          properties:
                                            description:
                                              description: A description for this
                                                rule. Restricted to 140 chars.
                                              type: string
                                            destination:
                                              description: Destination is the destination
                                                address prefix. CIDR or destination
                                                IP range. Asterix '*' can also be
                                                used to match all source IPs. Default
                                                tags such as 'VirtualNetwork', 'AzureLoadBalancer'
                                                and 'Internet' can also be used.
                                              type: string
                                            destinationPorts:
                                              description: DestinationPorts specifies
                                                the destination port or range. Integer
                                                or range between 0 and 65535. Asterix
                                                '*' can also be used to match all
                                                ports.
                                              type: string
                                            direction:
                                              description: Direction indicates whether
                                                the rule applies to inbound, or outbound
                                                traffic. "Inbound" or "Outbound".
                                              enum:
                                              - Inbound
                                              - Outbound
                                              type: string
                                            name:
                                              description: Name is a unique name within
                                                the network security group.
                                              type: string
                                            priority:
                                              description: Priority is a number between
                                                100 and 4096. Each rule should have
                                                a unique value for priority. Rules
                                                are processed in priority order, with
                                                lower numbers processed before higher
                                                numbers. Once traffic matches a rule,
                                                processing stops.
                                              format: int32
                                              type: integer
                                            protocol:
                                              description: Protocol specifies the
                                                protocol type. "Tcp", "Udp", "Icmp",
                                                or "*".
                                              enum:
                                              - Tcp
                                              - Udp
                                              - Icmp
                                              - '*'
                                              type: string
                                            source:
                                              description: Source specifies the CIDR
                                                or source IP range. Asterix '*' can
                                                also be used to match all source IPs.
                                                Default tags such as 'VirtualNetwork',
                                                'AzureLoadBalancer' and 'Internet'
                                                can also be used. If this is an ingress
                                                rule, specifies where network traffic
                                                originates from.
                                              type: string
                                            sourcePorts:
                                              description: SourcePorts specifies source
                                                port or range. Integer or range between
                                                0 and 65535. Asterix '*' can also
                                                be used to match all ports.
                                              type: string
                                          required:
                                          - description
                                          - direction
                                          - name
                                          - protocol
                                          type: object
                                        type: array
                                        x-kubernetes-list-map-keys:
                                        - name
                                        x-kubernetes-list-type: map
                                      tags:
                                        additionalProperties:
                                          type: string
                                        description: Tags defines a map of tags.
                                        type: object
                                    type: object
                                  serviceEndpoints:
                                    description: ServiceEndpoints is a slice of Virtual
                                      Network service endpoints to enable for the
                                      subnets.
                                    items:
                                      description: ServiceEndpointSpec configures
                                        an Azure Service Endpoint.
                                      properties:
                                        locations:
                                          items:
                                            type: string
                                          type: array
                                        service:
                                          type: string
                                      required:
                                      - locations
                                      - service
                                      type: object
                                    type: array
                                    x-kubernetes-list-map-keys:
                                    - service
                                    x-kubernetes-list-type: map
                                required:
                                - name
                                - role
                                type: object
                            type: object
                        type: object
                      cloudProviderConfigOverrides:
                        description: 'CloudProviderConfigOverrides is an optional
                          set of configuration values that can be overridden in azure
                          cloud provider config. This is only a subset of options
                          that are available in azure cloud provider config. Some
                          values for the cloud provider config are inferred from other
                          parts of cluster api provider azure spec, and may not be
                          available for overrides. See: https://kubernetes-sigs.github.io/cloud-provider-azure/install/configs
                          Note: All cloud provider config values can be customized
                          by creating the secret beforehand. CloudProviderConfigOverrides
                          is only used when the secret is managed by the Azure Provider.'
                        properties:
                          backOffs:
                            description: BackOffConfig indicates the back-off config
                              options.
                            properties:
                              cloudProviderBackoff:
                                type: boolean
                              cloudProviderBackoffDuration:
                                type: integer
                              cloudProviderBackoffExponent:
                                anyOf:
                                - type: integer
                                - type: string
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                              cloudProviderBackoffJitter:
                                anyOf:
                                - type: integer
                                - type: string
                                pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                x-kubernetes-int-or-string: true
                              cloudProviderBackoffRetries:
                                type: integer
                            type: object
                          rateLimits:
                            items:
                              description: 'RateLimitSpec represents the rate limit
                                configuration for a particular kind of resource. Eg.
                                loadBalancerRateLimit is used to configure rate limits
                                for load balancers. This eventually gets converted
                                to CloudProviderRateLimitConfig that cloud-provider-azure
                                expects. See: https://github.com/kubernetes-sigs/cloud-provider-azure/blob/d585c2031925b39c925624302f22f8856e29e352/pkg/provider/azure_ratelimit.go#L25
                                We cannot use CloudProviderRateLimitConfig directly
                                because floating point values are not supported in
                                controller-tools. See: https://github.com/kubernetes-sigs/controller-tools/issues/245'
                              properties:
                                config:
                                  description: RateLimitConfig indicates the rate
                                    limit config options.
                                  properties:
                                    cloudProviderRateLimit:
                                      type: boolean
                                    cloudProviderRateLimitBucket:
                                      type: integer
                                    cloudProviderRateLimitBucketWrite:
                                      type: integer
                                    cloudProviderRateLimitQPS:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                    cloudProviderRateLimitQPSWrite:
                                      anyOf:
                                      - type: integer
                                      - type: string
                                      pattern: ^(\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))(([KMGTPE]i)|[numkMGTPE]|([eE](\+|-)?(([0-9]+(\.[0-9]*)?)|(\.[0-9]+))))?$
                                      x-kubernetes-int-or-string: true
                                  type: object
                                name:
                                  description: Name is the name of the rate limit
                                    spec.
                                  enum:
                                  - defaultRateLimit
                                  - routeRateLimit
                                  - subnetsRateLimit
                                  - interfaceRateLimit
                                  - routeTableRateLimit
                                  - loadBalancerRateLimit
                                  - publicIPAddressRateLimit
                                  - securityGroupRateLimit
                                  - virtualMachineRateLimit
                                  - storageAccountRateLimit
                                  - diskRateLimit
                                  - snapshotRateLimit
                                  - virtualMachineScaleSetRateLimit
                                  - virtualMachineSizesRateLimit
                                  - availabilitySetRateLimit
                                  type: string
                              required:
                              - name
                              type: object
                            type: array
                        type: object
                      identityRef:
                        description: IdentityRef is a reference to an AzureIdentity
                          to be used when reconciling this cluster
                        properties:
                          apiVersion:
                            description: API version of the referent.
                            type: string
                          fieldPath:
                            description: 'If referring to a piece of an object instead
                              of an entire object, this string should contain a valid
                              JSON/Go field access statement, such as desiredState.manifest.containers[2].
                              For example, if the object reference is to a container
                              within a pod, this would take on a value like: "spec.containers{name}"
                              (where "name" refers to the name of the container that
                              triggered the event) or if no container name is specified
                              "spec.containers[2]" (container with index 2 in this
                              pod). This syntax is chosen only to have some well-defined
                              way of referencing a part of an object. TODO: this design
                              is not final and this field is subject to change in
                              the future.'
                            type: string
                          kind:
                            description: 'Kind of the referent. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds'
                            type: string
                          name:
                            description: 'Name of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names'
                            type: string
                          namespace:
                            description: 'Namespace of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/'
                            type: string
                          resourceVersion:
                            description: 'Specific resourceVersion to which this reference
                              is made, if any. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#concurrency-control-and-consistency'
                            type: string
                          uid:
                            description: 'UID of the referent. More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#uids'
                            type: string
                        type: object
                        x-kubernetes-map-type: atomic
                      location:
                        type: string
                      networkSpec:
                        description: NetworkSpec encapsulates all things related to
                          Azure network.
                        properties:
                          apiServerLB:
                            description: APIServerLB is the configuration for the
                              control-plane load balancer.
                            properties:
                              idleTimeoutInMinutes:
                                description: IdleTimeoutInMinutes specifies the timeout
                                  for the TCP idle connection.
                                format: int32
                                type: integer
                              sku:
                                description: SKU defines an Azure load balancer SKU.
                                type: string
                              type:
                                description: LBType defines an Azure load balancer
                                  Type.
                                type: string
                            type: object
                          controlPlaneOutboundLB:
                            description: ControlPlaneOutboundLB is the configuration
                              for the control-plane outbound load balancer. This is
                              different from APIServerLB, and is used only in private
                              clusters (optionally) for enabling outbound traffic.
                            properties:
                              idleTimeoutInMinutes:
                                description: IdleTimeoutInMinutes specifies the timeout
                                  for the TCP idle connection.
                                format: int32
                                type: integer
                              sku:
                                description: SKU defines an Azure load balancer SKU.
                                type: string
                              type:
                                description: LBType defines an Azure load balancer
                                  Type.
                                type: string
                            type: object
                          nodeOutboundLB:
                            description: NodeOutboundLB is the configuration for the
                              node outbound load balancer.
                            properties:
                              idleTimeoutInMinutes:
                                description: IdleTimeoutInMinutes specifies the timeout
                                  for the TCP idle connection.
                                format: int32
                                type: integer
                              sku:
                                description: SKU defines an Azure load balancer SKU.
                                type: string
                              type:
                                description: LBType defines an Azure load balancer
                                  Type.
                                type: string
                            type: object
                          privateDNSZoneName:
                            description: PrivateDNSZoneName defines the zone name
                              for the Azure Private DNS.
                            type: string
                          subnets:
                            description: Subnets is the configuration for the control-plane
                              subnet and the node subnet.
                            items:
                              description: SubnetTemplateSpec specifies a template
                                for a subnet.
                              properties:
                                cidrBlocks:
                                  description: CIDRBlocks defines the subnet's address
                                    space, specified as one or more address prefixes
                                    in CIDR notation.
                                  items:
                                    type: string
                                  type: array
                                name:
                                  description: Name defines a name for the subnet
                                    resource.
                                  type: string
                                natGateway:
                                  description: NatGateway associated with this subnet.
                                  properties:
                                    name:
                                      type: string
                                  required:
                                  - name
                                  type: object
                                role:
                                  description: Role defines the subnet role (eg. Node,
                                    ControlPlane)
                                  enum:
                                  - node
                                  - control-plane
                                  - bastion
                                  type: string
                                securityGroup:
                                  description: SecurityGroup defines the NSG (network
                                    security group) that should be attached to this
                                    subnet.
                                  properties:
                                    securityRules:
                                      description: SecurityRules is a slice of Azure
                                        security rules for security groups.
                                      items:
                                        description: SecurityRule defines an Azure
                                          security rule for security groups.
                                        properties:
                                          description:
                                            description: A description for this rule.
                                              Restricted to 140 chars.
                                            type: string
                                          destination:
                                            description: Destination is the destination
                                              address prefix. CIDR or destination
                                              IP range. Asterix '*' can also be used
                                              to match all source IPs. Default tags
                                              such as 'VirtualNetwork', 'AzureLoadBalancer'
                                              and 'Internet' can also be used.
                                            type: string
                                          destinationPorts:
                                            description: DestinationPorts specifies
                                              the destination port or range. Integer
                                              or range between 0 and 65535. Asterix
                                              '*' can also be used to match all ports.
                                            type: string
                                          direction:
                                            description: Direction indicates whether
                                              the rule applies to inbound, or outbound
                                              traffic. "Inbound" or "Outbound".
                                            enum:
                                            - Inbound
                                            - Outbound
                                            type: string
                                          name:
                                            description: Name is a unique name within
                                              the network security group.
                                            type: string
                                          priority:
                                            description: Priority is a number between
                                              100 and 4096. Each rule should have
                                              a unique value for priority. Rules are
                                              processed in priority order, with lower
                                              numbers processed before higher numbers.
                                              Once traffic matches a rule, processing
                                              stops.
                                            format: int32
                                            type: integer
                                          protocol:
                                            description: Protocol specifies the protocol
                                              type. "Tcp", "Udp", "Icmp", or "*".
                                            enum:
                                            - Tcp
                                            - Udp
                                            - Icmp
                                            - '*'
                                            type: string
                                          source:
                                            description: Source specifies the CIDR
                                              or source IP range. Asterix '*' can
                                              also be used to match all source IPs.
                                              Default tags such as 'VirtualNetwork',
                                              'AzureLoadBalancer' and 'Internet' can
                                              also be used. If this is an ingress
                                              rule, specifies where network traffic
                                              originates from.
                                            type: string
                                          sourcePorts:
                                            description: SourcePorts specifies source
                                              port or range. Integer or range between
                                              0 and 65535. Asterix '*' can also be
                                              used to match all ports.
                                            type: string
                                        required:
                                        - description
                                        - direction
                                        - name
                                        - protocol
                                        type: object
                                      type: array
                                      x-kubernetes-list-map-keys:
                                      - name
                                      x-kubernetes-list-type: map
                                    tags:
                                      additionalProperties:
                                        type: string
                                      description: Tags defines a map of tags.
                                      type: object
                                  type: object
                                serviceEndpoints:
                                  description: ServiceEndpoints is a slice of Virtual
                                    Network service endpoints to enable for the subnets.
                                  items:
                                    description: ServiceEndpointSpec configures an
                                      Azure Service Endpoint.
                                    properties:
                                      locations:
                                        items:
                                          type: string
                                        type: array
                                      service:
                                        type: string
                                    required:
                                    - locations
                                    - service
                                    type: object
                                  type: array
                                  x-kubernetes-list-map-keys:
                                  - service
                                  x-kubernetes-list-type: map
                              required:
                              - name
                              - role
                              type: object
                            type: array
                            x-kubernetes-list-map-keys:
                            - name
                            x-kubernetes-list-type: map
                          vnet:
                            description: Vnet is the configuration for the Azure virtual
                              network.
                            properties:
                              cidrBlocks:
                                description: CIDRBlocks defines the virtual network's
                                  address space, specified as one or more address
                                  prefixes in CIDR notation.
                                items:
                                  type: string
                                type: array
                              peerings:
                                description: Peerings defines a list of peerings of
                                  the newly created virtual network with existing
                                  virtual networks.
                                items:
                                  description: VnetPeeringClassSpec specifies a virtual
                                    network peering class.
                                  properties:
                                    remoteVnetName:
                                      description: RemoteVnetName defines name of
                                        the remote virtual network.
                                      type: string
                                    resourceGroup:
                                      description: ResourceGroup is the resource group
                                        name of the remote virtual network.
                                      type: string
                                  required:
                                  - remoteVnetName
                                  type: object
                                type: array
                              tags:
                                additionalProperties:
                                  type: string
                                description: Tags is a collection of tags describing
                                  the resource.
                                type: object
                            type: object
                        type: object
                      subscriptionID:
                        type: string
                    required:
                    - location
                    type: object
                required:
                - spec
                type: object
            required:
            - template
            type: object
        type: object
    served: true
    storage: true
