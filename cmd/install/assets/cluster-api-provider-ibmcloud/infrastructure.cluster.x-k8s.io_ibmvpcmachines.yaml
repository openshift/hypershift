---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.15.0
  name: ibmvpcmachines.infrastructure.cluster.x-k8s.io
spec:
  group: infrastructure.cluster.x-k8s.io
  names:
    categories:
    - cluster-api
    kind: IBMVPCMachine
    listKind: IBMVPCMachineList
    plural: ibmvpcmachines
    singular: ibmvpcmachine
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - description: Cluster infrastructure is ready for IBM VPC instances
      jsonPath: .status.ready
      name: Ready
      type: string
    name: v1beta1
    schema:
      openAPIV3Schema:
        description: IBMVPCMachine is the Schema for the ibmvpcmachines API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: IBMVPCMachineSpec defines the desired state of IBMVPCMachine.
            properties:
              bootVolume:
                description: BootVolume contains machines's boot volume configurations
                  like size, iops etc..
                properties:
                  deleteVolumeOnInstanceDelete:
                    default: true
                    description: |-
                      DeleteVolumeOnInstanceDelete If set to true, when deleting the instance the volume will also be deleted.
                      Default is set as true
                    type: boolean
                  encryptionKeyCRN:
                    description: |-
                      EncryptionKey is the root key to use to wrap the data encryption key for the volume and this points to the CRN
                      and possible values are as follows.
                      The CRN of the [Key Protect Root
                      Key](https://cloud.ibm.com/docs/key-protect?topic=key-protect-getting-started-tutorial) or [Hyper Protect Crypto
                      Service Root Key](https://cloud.ibm.com/docs/hs-crypto?topic=hs-crypto-get-started) for this resource.
                      If unspecified, the `encryption` type for the volume will be `provider_managed`.
                    type: string
                  iops:
                    description: |-
                      Iops is the maximum I/O operations per second (IOPS) to use for the volume. Applicable only to volumes using a profile
                      family of `custom`.
                    format: int64
                    type: integer
                  name:
                    description: |-
                      Name is the unique user-defined name for this volume.
                      Default will be autogenerated
                    type: string
                  profile:
                    default: general-purpose
                    description: |-
                      Profile is the volume profile for the bootdisk, refer https://cloud.ibm.com/docs/vpc?topic=vpc-block-storage-profiles
                      for more information.
                      Default to general-purpose
                    enum:
                    - general-purpose
                    - 5iops-tier
                    - 10iops-tier
                    - custom
                    type: string
                  sizeGiB:
                    description: |-
                      SizeGiB is the size of the virtual server's boot disk in GiB.
                      Default to the size of the image's `minimum_provisioned_size`.
                    format: int64
                    type: integer
                type: object
              image:
                description: |-
                  Image is the id of OS image which would be install on the instance.
                  Example: r134-ed3f775f-ad7e-4e37-ae62-7199b4988b00
                type: string
              imageName:
                description: ImageName is the name of OS image which would be install
                  on the instance.
                type: string
              name:
                description: Name of the instance.
                type: string
              primaryNetworkInterface:
                description: PrimaryNetworkInterface is required to specify subnet.
                properties:
                  subnet:
                    description: Subnet ID of the network interface.
                    type: string
                type: object
              profile:
                description: "Profile indicates the flavor of instance. Example: bx2-8x32\tmeans
                  8 vCPUs\t32 GB RAM\t16 Gbps\nTODO: add a reference link of profile"
                type: string
              providerID:
                description: ProviderID is the unique identifier as specified by the
                  cloud provider.
                type: string
              sshKeyNames:
                description: SSHKeysNames is the SSH pub key names that will be used
                  to access VM.
                items:
                  type: string
                type: array
              sshKeys:
                description: SSHKeys is the SSH pub keys that will be used to access
                  VM.
                items:
                  type: string
                type: array
              zone:
                description: |-
                  Zone is the place where the instance should be created. Example: us-south-3
                  TODO: Actually zone is transparent to user. The field user can access is location. Example: Dallas 2
                type: string
            required:
            - zone
            type: object
          status:
            description: IBMVPCMachineStatus defines the observed state of IBMVPCMachine.
            properties:
              addresses:
                description: Addresses contains the GCP instance associated addresses.
                items:
                  description: NodeAddress contains information for the node's address.
                  properties:
                    address:
                      description: The node address.
                      type: string
                    type:
                      description: Node address type, one of Hostname, ExternalIP
                        or InternalIP.
                      type: string
                  required:
                  - address
                  - type
                  type: object
                type: array
              instanceID:
                type: string
              instanceState:
                description: InstanceStatus is the status of the GCP instance for
                  this machine.
                type: string
              ready:
                description: Ready is true when the provider resource is ready.
                type: boolean
            type: object
        type: object
    served: true
    storage: false
    subresources:
      status: {}
  - additionalPrinterColumns:
    - description: Cluster infrastructure is ready for IBM VPC instances
      jsonPath: .status.ready
      name: Ready
      type: string
    name: v1beta2
    schema:
      openAPIV3Schema:
        description: IBMVPCMachine is the Schema for the ibmvpcmachines API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: IBMVPCMachineSpec defines the desired state of IBMVPCMachine.
            properties:
              bootVolume:
                description: BootVolume contains machines's boot volume configurations
                  like size, iops etc..
                properties:
                  deleteVolumeOnInstanceDelete:
                    default: true
                    description: |-
                      DeleteVolumeOnInstanceDelete If set to true, when deleting the instance the volume will also be deleted.
                      Default is set as true
                    type: boolean
                  encryptionKeyCRN:
                    description: |-
                      EncryptionKey is the root key to use to wrap the data encryption key for the volume and this points to the CRN
                      and possible values are as follows.
                      The CRN of the [Key Protect Root
                      Key](https://cloud.ibm.com/docs/key-protect?topic=key-protect-getting-started-tutorial) or [Hyper Protect Crypto
                      Service Root Key](https://cloud.ibm.com/docs/hs-crypto?topic=hs-crypto-get-started) for this resource.
                      If unspecified, the `encryption` type for the volume will be `provider_managed`.
                    type: string
                  iops:
                    description: |-
                      Iops is the maximum I/O operations per second (IOPS) to use for the volume. Applicable only to volumes using a profile
                      family of `custom`.
                    format: int64
                    type: integer
                  name:
                    description: |-
                      Name is the unique user-defined name for this volume.
                      Default will be autogenerated
                    type: string
                  profile:
                    default: general-purpose
                    description: |-
                      Profile is the volume profile for the bootdisk, refer https://cloud.ibm.com/docs/vpc?topic=vpc-block-storage-profiles
                      for more information.
                      Default to general-purpose
                    enum:
                    - general-purpose
                    - 5iops-tier
                    - 10iops-tier
                    - custom
                    type: string
                  sizeGiB:
                    description: |-
                      SizeGiB is the size of the virtual server's boot disk in GiB.
                      Default to the size of the image's `minimum_provisioned_size`.
                    format: int64
                    type: integer
                type: object
              image:
                description: |-
                  Image is the OS image which would be install on the instance.
                  ID will take higher precedence over Name if both specified.
                properties:
                  id:
                    description: ID of resource
                    minLength: 1
                    type: string
                  name:
                    description: Name of resource
                    minLength: 1
                    type: string
                type: object
              name:
                description: Name of the instance.
                type: string
              primaryNetworkInterface:
                description: PrimaryNetworkInterface is required to specify subnet.
                properties:
                  subnet:
                    description: Subnet ID of the network interface.
                    type: string
                type: object
              profile:
                description: "Profile indicates the flavor of instance. Example: bx2-8x32\tmeans
                  8 vCPUs\t32 GB RAM\t16 Gbps\nTODO: add a reference link of profile"
                type: string
              providerID:
                description: ProviderID is the unique identifier as specified by the
                  cloud provider.
                type: string
              sshKeys:
                description: |-
                  SSHKeys is the SSH pub keys that will be used to access VM.
                  ID will take higher precedence over Name if both specified.
                items:
                  description: |-
                    IBMVPCResourceReference is a reference to a specific VPC resource by ID or Name
                    Only one of ID or Name may be specified. Specifying more than one will result in
                    a validation error.
                  properties:
                    id:
                      description: ID of resource
                      minLength: 1
                      type: string
                    name:
                      description: Name of resource
                      minLength: 1
                      type: string
                  type: object
                type: array
              zone:
                description: |-
                  Zone is the place where the instance should be created. Example: us-south-3
                  TODO: Actually zone is transparent to user. The field user can access is location. Example: Dallas 2
                type: string
            required:
            - image
            - zone
            type: object
          status:
            description: IBMVPCMachineStatus defines the observed state of IBMVPCMachine.
            properties:
              addresses:
                description: Addresses contains the GCP instance associated addresses.
                items:
                  description: NodeAddress contains information for the node's address.
                  properties:
                    address:
                      description: The node address.
                      type: string
                    type:
                      description: Node address type, one of Hostname, ExternalIP
                        or InternalIP.
                      type: string
                  required:
                  - address
                  - type
                  type: object
                type: array
              instanceID:
                type: string
              instanceState:
                description: InstanceStatus is the status of the GCP instance for
                  this machine.
                type: string
              ready:
                description: Ready is true when the provider resource is ready.
                type: boolean
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
