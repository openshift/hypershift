apiVersion: v1
data:
  recycler-pod.yaml: |
    apiVersion: v1
    kind: Pod
    metadata:
      name: recycler-pod
      namespace: openshift-infra
      annotations:
        target.workload.openshift.io/management: '{"effect": "PreferredDuringScheduling"}'
    spec:
      activeDeadlineSeconds: 60
      restartPolicy: Never
      serviceAccountName: pv-recycler-controller
      containers:
        - name: recycler-container
          image: tools
          command:
          - "/bin/bash"
          args:
          - "-c"
          - "test -e /scrub && rm -rf /scrub/..?* /scrub/.[!.]* /scrub/*  && test -z \"$(ls -A /scrub)\" || exit 1"
          volumeMounts:
            - mountPath: /scrub
              name: vol
          securityContext:
            runAsUser: 0
          priorityClassName: openshift-user-critical
          resources:
            requests:
              memory: 50Mi
              cpu: 10m
      volumes:
        - name: vol
kind: ConfigMap
metadata:
  creationTimestamp: null
  name: recycler-config
  namespace: hcp-namespace
  ownerReferences:
  - apiVersion: hypershift.openshift.io/v1beta1
    blockOwnerDeletion: true
    controller: true
    kind: HostedControlPlane
    name: hcp
    uid: ""
  resourceVersion: "1"
